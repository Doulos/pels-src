#include <stdio.h>
#include <string.h>



void secret () {
	printf("SOME SECRET !!! :( \n");
}

void public() {
	printf("Something we all know :) \n");
}

int main(int argc, char **argv) {

	struct Test {
	char message[8];
	void (*f_ptr)();
};

	struct Test test = {"Hello",public};
/*call the function pointer from the struct */
	test.f_ptr();	
/*print address of secret() */
	printf("secret function at: %p\n",secret);

/* Do something insecure: */	
	strcpy(test.message,argv[1]);
/*call the function pointer from the struct again*/
	test.f_ptr();	 // this can be made to call secret()!!
	return 0;
}
